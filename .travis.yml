language: go
go:
  - 1.8.x
  - 1.9.x
  - 1.10.x
  - master

matrix:
 fast_finish: true
 allow_failures:
   - go: master

go_import_path: gonum.org/v1/hdf5

sudo: false

addons:
  apt:
    packages:
      - libhdf5-serial-dev

env:
  global:
    - GODEBUG=cgocheck=0
    - TAGS="hdf5_v1.8"
    ## FIXME: add hdf5_v1.10 when trusty->bionic
    ## - TAGS="hdf5_v1.8 hdf5_v1.10"

notifications:
  email:
    recipients:
      - binet@cern.ch
    on_success: change
    on_failure: always

script:
 - go get -d -t -v -tags="$TAGS" ./...
 - go install -v -tags="$TAGS" ./...
 - go test -v -tags="$TAGS" ./...

